{"ast":null,"code":"import { EventEmitter } from '@angular/core';\nimport { FormBuilder, FormControl } from '@angular/forms';\nimport { debounceTime, distinctUntilChanged } from 'rxjs/operators';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/forms\";\nexport class HeaderBar {\n  constructor(fb) {\n    this.fb = fb;\n    this.onLoad = new EventEmitter();\n    this.onClear = new EventEmitter();\n    this.onFilter = new EventEmitter();\n    this.form = this.fb.group({\n      searchBy: new FormControl(''),\n      filterBy: new FormControl('')\n    });\n  }\n  ngOnInit() {\n    const filterBy = this.form.controls['filterBy'];\n    const searchFor = this.form.controls['searchBy'];\n    // When 'filterBy' input value changes, auto request filter update\n    filterBy.valueChanges.pipe(debounceTime(250), distinctUntilChanged()).subscribe(v => {\n      this.onFilter.emit(v);\n    });\n    filterBy.setValue(this.filterBy);\n    searchFor.setValue(this.searchFor);\n  }\n  clearOnEscape(event) {\n    if (event.keyCode === 27) {\n      const filterBy = this.form.controls['filterBy'];\n      filterBy.setValue('');\n    }\n    if (event.key === 'Enter') {\n      event.stopImmediatePropagation();\n      event.preventDefault();\n    }\n  }\n}\nHeaderBar.ɵfac = function HeaderBar_Factory(t) {\n  return new (t || HeaderBar)(i0.ɵɵdirectiveInject(i1.FormBuilder));\n};\nHeaderBar.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: HeaderBar,\n  selectors: [[\"header-bar\"]],\n  inputs: {\n    searchFor: \"searchFor\",\n    filterBy: \"filterBy\"\n  },\n  outputs: {\n    onLoad: \"onLoad\",\n    onClear: \"onClear\",\n    onFilter: \"onFilter\"\n  },\n  decls: 19,\n  vars: 1,\n  consts: [[1, \"grid\", \"sm:grid-cols-2\", \"gap-4\", \"w-full\", 3, \"formGroup\"], [1, \"mt-3\", \"sm:m-3\", \"shadow-sm\"], [\"for\", \"inputQuery\", 1, \"ml-1\", \"block\", \"text-sm\", \"font-medium\", \"text-neutral-700\"], [1, \"mt-1\", \"relative\", \"flex\", \"items-center\"], [\"type\", \"text\", \"name\", \"inputQuery\", \"id\", \"inputQuery\", \"formControlName\", \"searchBy\", 1, \"p-3\", \"shadow-sm\", \"focus:ring-neutral-500\", \"focus:border-neutral-500\", \"block\", \"w-full\", \"pr-12\", \"sm:text-sm\", \"border-neutral-300\", \"bg-cyan-100\", \"empty:bg-emerald-100\", \"rounded-md\"], [1, \"absolute\", \"inset-y-0\", \"right-0\", \"flex\", \"py-1.5\", \"pr-1.5\"], [\"title\", \"Search for Movies\", 1, \"inline-flex\", \"items-center\", \"border\", \"border-stone-400/30\", \"rounded\", \"px-2\", \"text-sm\", \"font-sans\", \"font-medium\", \"text-neutral-400\", 3, \"click\"], [\"xmlns\", \"http://www.w3.org/2000/svg\", \"width\", \"16\", \"height\", \"16\", \"fill\", \"currentColor\", \"viewBox\", \"0 0 16 16\", 1, \"bi\", \"bi-search\"], [\"d\", \"M11.742 10.344a6.5 6.5 0 1 0-1.397 1.398h-.001c.03.04.062.078.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1.007 1.007 0 0 0-.115-.1zM12 6.5a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0z\"], [1, \"sm:m-3\", \"shadow-sm\"], [\"for\", \"inputFilter\", 1, \"ml-1\", \"block\", \"text-sm\", \"font-medium\", \"text-neutral-700\"], [\"type\", \"text\", \"name\", \"inputFilter\", \"id\", \"inputFilter\", \"formControlName\", \"filterBy\", 1, \"p-3\", \"shadow-sm\", \"focus:ring-neutral-500\", \"focus:border-neutral-500\", \"block\", \"w-full\", \"pr-12\", \"sm:text-sm\", \"border-neutral-300\", \"bg-emerald-100\", \"rounded-md\", 3, \"keydown\"], [\"title\", \"Filter Movies By\", 1, \"inline-flex\", \"items-center\", \"border\", \"border-stone-400/30\", \"rounded\", \"px-2\", \"text-sm\", \"font-sans\", \"font-medium\", \"text-neutral-400\", 3, \"click\"], [\"xmlns\", \"http://www.w3.org/2000/svg\", \"fill\", \"none\", \"viewBox\", \"0 0 24 24\", \"stroke\", \"currentColor\", \"stroke-width\", \"2\", 1, \"h-6\", \"w-6\"], [\"stroke-linecap\", \"round\", \"stroke-linejoin\", \"round\", \"d\", \"M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z\"]],\n  template: function HeaderBar_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"form\", 0)(1, \"div\", 1)(2, \"label\", 2);\n      i0.ɵɵtext(3, \"Search for movies with title:\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(4, \"div\", 3);\n      i0.ɵɵelement(5, \"input\", 4);\n      i0.ɵɵelementStart(6, \"div\", 5)(7, \"button\", 6);\n      i0.ɵɵlistener(\"click\", function HeaderBar_Template_button_click_7_listener() {\n        return ctx.onLoad.emit(ctx.form.value.searchBy);\n      });\n      i0.ɵɵnamespaceSVG();\n      i0.ɵɵelementStart(8, \"svg\", 7);\n      i0.ɵɵelement(9, \"path\", 8);\n      i0.ɵɵelementEnd()()()()();\n      i0.ɵɵnamespaceHTML();\n      i0.ɵɵelementStart(10, \"div\", 9)(11, \"label\", 10);\n      i0.ɵɵtext(12, \"Filter movies to find:\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(13, \"div\", 3)(14, \"input\", 11);\n      i0.ɵɵlistener(\"keydown\", function HeaderBar_Template_input_keydown_14_listener($event) {\n        return ctx.clearOnEscape($event);\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(15, \"div\", 5)(16, \"button\", 12);\n      i0.ɵɵlistener(\"click\", function HeaderBar_Template_button_click_16_listener() {\n        return ctx.onClear.emit();\n      });\n      i0.ɵɵnamespaceSVG();\n      i0.ɵɵelementStart(17, \"svg\", 13);\n      i0.ɵɵelement(18, \"path\", 14);\n      i0.ɵɵelementEnd()()()()()();\n    }\n    if (rf & 2) {\n      i0.ɵɵproperty(\"formGroup\", ctx.form);\n    }\n  },\n  dependencies: [i1.ɵNgNoValidate, i1.DefaultValueAccessor, i1.NgControlStatus, i1.NgControlStatusGroup, i1.FormGroupDirective, i1.FormControlName],\n  encapsulation: 2\n});","map":{"version":3,"mappings":"AAAA,SAAwBA,YAAY,QAAmB,eAAe;AACtE,SAASC,WAAW,EAAEC,WAAW,QAAQ,gBAAgB;AAEzD,SAASC,YAAY,EAAEC,oBAAoB,QAAQ,gBAAgB;;;AAMnE,OAAM,MAAOC,SAAS;EAapBC,YAAoBC,EAAe;IAAf,OAAE,GAAFA,EAAE;IATZ,WAAM,GAAG,IAAIP,YAAY,EAAU;IACnC,YAAO,GAAG,IAAIA,YAAY,EAAQ;IAClC,aAAQ,GAAG,IAAIA,YAAY,EAAU;IAE/C,SAAI,GAAG,IAAI,CAACO,EAAE,CAACC,KAAK,CAAC;MACnBC,QAAQ,EAAE,IAAIP,WAAW,CAAC,EAAE,CAAC;MAC7BQ,QAAQ,EAAE,IAAIR,WAAW,CAAC,EAAE;KAC7B,CAAC;EAEoC;EAEtCS,QAAQ;IACN,MAAMD,QAAQ,GAAG,IAAI,CAACE,IAAI,CAACC,QAAQ,CAAC,UAAU,CAAC;IAC/C,MAAMC,SAAS,GAAG,IAAI,CAACF,IAAI,CAACC,QAAQ,CAAC,UAAU,CAAC;IAEhD;IACAH,QAAQ,CAACK,YAAY,CAClBC,IAAI,CAACb,YAAY,CAAC,GAAG,CAAC,EAAEC,oBAAoB,EAAE,CAAC,CAC/Ca,SAAS,CAAEC,CAAC,IAAI;MACf,IAAI,CAACC,QAAQ,CAACC,IAAI,CAACF,CAAC,CAAC;IACvB,CAAC,CAAC;IAEJR,QAAQ,CAACW,QAAQ,CAAC,IAAI,CAACX,QAAQ,CAAC;IAChCI,SAAS,CAACO,QAAQ,CAAC,IAAI,CAACP,SAAS,CAAC;EACpC;EAEAQ,aAAa,CAACC,KAAoB;IAChC,IAAIA,KAAK,CAACC,OAAO,KAAK,EAAE,EAAE;MACxB,MAAMd,QAAQ,GAAG,IAAI,CAACE,IAAI,CAACC,QAAQ,CAAC,UAAU,CAAC;MAC/CH,QAAQ,CAACW,QAAQ,CAAC,EAAE,CAAC;;IAGvB,IAAIE,KAAK,CAACE,GAAG,KAAK,OAAO,EAAE;MACzBF,KAAK,CAACG,wBAAwB,EAAE;MAChCH,KAAK,CAACI,cAAc,EAAE;;EAE1B;;AAxCWtB,SAAS;mBAATA,SAAS;AAAA;AAATA,SAAS;QAATA,SAAS;EAAAuB;EAAAC;IAAAf;IAAAJ;EAAA;EAAAoB;IAAAC;IAAAC;IAAAb;EAAA;EAAAc;EAAAC;EAAAC;EAAAC;IAAA;MCTtBC,+BAAkE;MAK3DA,6CAA6B;MAAAA,iBAC/B;MACDA,8BAA6C;MAC3CA,2BAME;MACFA,8BAA2D;MAGvDA;QAAA,OAASC,wCAAgC;MAAA,EAAC;MAG1CD,mBAOC;MAPDA,8BAOC;MACCA,0BAEE;MACJA,iBAAM;MAMdA,oBAA8B;MAA9BA,+BAA8B;MAIzBA,uCAAsB;MAAAA,iBACxB;MACDA,+BAA6C;MAMzCA;QAAA,OAAWC,yBAAqB;MAAA,EAAC;MALnCD,iBAOE;MACFA,+BAA2D;MAGvDA;QAAA,OAASC,kBAAc;MAAA,EAAC;MAGxBD,mBAOC;MAPDA,gCAOC;MACCA,4BAIE;MACJA,iBAAM;;;MAxEVA,oCAAkB","names":["EventEmitter","FormBuilder","FormControl","debounceTime","distinctUntilChanged","HeaderBar","constructor","fb","group","searchBy","filterBy","ngOnInit","form","controls","searchFor","valueChanges","pipe","subscribe","v","onFilter","emit","setValue","clearOnEscape","event","keyCode","key","stopImmediatePropagation","preventDefault","selectors","inputs","outputs","onLoad","onClear","decls","vars","consts","template","i0","ctx"],"sourceRoot":"","sources":["/project/zustand-angular-movie-search/src/app/components/header/header.component.ts","/project/zustand-angular-movie-search/src/app/components/header/header.component.html"],"sourcesContent":["import { Input, Output, EventEmitter, Component } from '@angular/core';\nimport { FormBuilder, FormControl } from '@angular/forms';\n\nimport { debounceTime, distinctUntilChanged } from 'rxjs/operators';\n\n@Component({\n  selector: 'header-bar',\n  templateUrl: './header.component.html',\n})\nexport class HeaderBar {\n  @Input() searchFor: string;\n  @Input() filterBy: string;\n\n  @Output() onLoad = new EventEmitter<string>();\n  @Output() onClear = new EventEmitter<void>();\n  @Output() onFilter = new EventEmitter<string>();\n\n  form = this.fb.group({\n    searchBy: new FormControl(''),\n    filterBy: new FormControl(''),\n  });\n\n  constructor(private fb: FormBuilder) {}\n\n  ngOnInit() {\n    const filterBy = this.form.controls['filterBy'];\n    const searchFor = this.form.controls['searchBy'];\n\n    // When 'filterBy' input value changes, auto request filter update\n    filterBy.valueChanges\n      .pipe(debounceTime(250), distinctUntilChanged())\n      .subscribe((v) => {\n        this.onFilter.emit(v);\n      });\n\n    filterBy.setValue(this.filterBy);\n    searchFor.setValue(this.searchFor);\n  }\n\n  clearOnEscape(event: KeyboardEvent) {\n    if (event.keyCode === 27) {\n      const filterBy = this.form.controls['filterBy'];\n      filterBy.setValue('');\n    }\n\n    if (event.key === 'Enter') {\n      event.stopImmediatePropagation();\n      event.preventDefault();\n    }\n  }\n}\n","<form [formGroup]=\"form\" class=\"grid sm:grid-cols-2 gap-4 w-full\">\n  <div class=\"mt-3 sm:m-3 shadow-sm\">\n    <label\n      for=\"inputQuery\"\n      class=\"ml-1 block text-sm font-medium text-neutral-700\"\n      >Search for movies with title:</label\n    >\n    <div class=\"mt-1 relative flex items-center\">\n      <input\n        type=\"text\"\n        name=\"inputQuery\"\n        id=\"inputQuery\"\n        class=\"p-3 shadow-sm focus:ring-neutral-500 focus:border-neutral-500 block w-full pr-12 sm:text-sm border-neutral-300 bg-cyan-100 empty:bg-emerald-100 rounded-md\"\n        formControlName=\"searchBy\"\n      />\n      <div class=\"absolute inset-y-0 right-0 flex py-1.5 pr-1.5\">\n        <button\n          class=\"inline-flex items-center border border-stone-400/30 rounded px-2 text-sm font-sans font-medium text-neutral-400\"\n          (click)=\"onLoad.emit(form.value.searchBy)\"\n          title=\"Search for Movies\"\n        >\n          <svg\n            xmlns=\"http://www.w3.org/2000/svg\"\n            width=\"16\"\n            height=\"16\"\n            fill=\"currentColor\"\n            class=\"bi bi-search\"\n            viewBox=\"0 0 16 16\"\n          >\n            <path\n              d=\"M11.742 10.344a6.5 6.5 0 1 0-1.397 1.398h-.001c.03.04.062.078.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1.007 1.007 0 0 0-.115-.1zM12 6.5a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0z\"\n            />\n          </svg>\n        </button>\n      </div>\n    </div>\n  </div>\n\n  <div class=\"sm:m-3 shadow-sm\">\n    <label\n      for=\"inputFilter\"\n      class=\"ml-1 block text-sm font-medium text-neutral-700\"\n      >Filter movies to find:</label\n    >\n    <div class=\"mt-1 relative flex items-center\">\n      <input\n        type=\"text\"\n        name=\"inputFilter\"\n        id=\"inputFilter\"\n        class=\"p-3 shadow-sm focus:ring-neutral-500 focus:border-neutral-500 block w-full pr-12 sm:text-sm border-neutral-300 bg-emerald-100 rounded-md\"\n        (keydown)=\"clearOnEscape($event)\"\n        formControlName=\"filterBy\"\n      />\n      <div class=\"absolute inset-y-0 right-0 flex py-1.5 pr-1.5\">\n        <button\n          class=\"inline-flex items-center border border-stone-400/30 rounded px-2 text-sm font-sans font-medium text-neutral-400\"\n          (click)=\"onClear.emit()\"\n          title=\"Filter Movies By\"\n        >\n          <svg\n            xmlns=\"http://www.w3.org/2000/svg\"\n            class=\"h-6 w-6\"\n            fill=\"none\"\n            viewBox=\"0 0 24 24\"\n            stroke=\"currentColor\"\n            stroke-width=\"2\"\n          >\n            <path\n              stroke-linecap=\"round\"\n              stroke-linejoin=\"round\"\n              d=\"M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z\"\n            />\n          </svg>\n        </button>\n      </div>\n    </div>\n  </div>\n</form>\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}